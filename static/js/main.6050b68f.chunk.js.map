{"version":3,"sources":["contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","utils/api.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ConfirmDeletePopup.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","utils/auth.js","images/logo.svg","components/Header.js","images/done-picture.svg","images/error-picture.svg","components/InfoTooltip.js","components/App.js","reportWebVitals.js","index.js"],"names":["CurrentUserContext","React","createContext","Card","onCardClick","onCardLike","onCardDelete","card","currentUser","useContext","isOwn","owner","_id","isLiked","likes","some","like","cardDeleteButtonDisplay","cardLikeButtonClassName","className","src","link","alt","name","onClick","type","style","display","length","Main","onEditProfile","onAddPlace","onEditAvatar","cards","email","onSignOut","backgroundImage","avatar","about","map","Footer","date","Date","getFullYear","toString","ImagePopup","onClose","isOpen","api","baseUrl","headers","this","_baseUrl","_headers","res","ok","json","Promise","reject","status","fetch","then","_getResponseData","method","body","JSON","stringify","avatarLink","all","getInfo","getCards","data","id","cardId","addLike","removeLike","authorization","PopupWithForm","title","children","submitButton","onSubmit","EditProfilePopup","onUpdateUser","isLoading","useState","setName","description","setDescription","useEffect","e","preventDefault","placeholder","minLength","maxLength","required","value","onChange","target","EditAvatarPopup","onUpdateAvatar","avatarInput","useRef","current","ref","AddPlacePopup","setLink","ConfirmDeletePopup","Login","handleLogin","setEmail","password","setPassword","Register","handleRegister","to","ProtectedRoute","Component","component","props","loggedIn","AUTH_URL","getResponseData","Header","handleSignOut","logo","path","exact","InfoTooltip","donePicture","pictureError","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isDeleteSubmitPopupOpen","setIsDeleteSubmitPopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","loading","setLoading","cardIdToDelete","setCardIdToDelete","setLoggedIn","infoTooltipIsOpened","setInfoTooltipIsOpened","history","useHistory","tokenCheck","token","jwt","localStorage","getItem","response","push","removeItem","closeAllPopups","userInfo","catch","err","console","log","Provider","auth","setItem","changeLikeCardStatus","newCard","newCards","cardItem","setInfo","info","finally","setAvatar","addCard","deleteCard","filter","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6050b68f.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n\r\n","import React from \"react\";\r\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\r\n\r\nfunction Card({onCardClick, onCardLike, onCardDelete, card}) {\r\n\r\n  function handleClick() {\r\n      onCardClick({name:card.name,link:card.link});\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    onCardLike(card);\r\n  }\r\n\r\n  function handleDeleteClick() {\r\n    onCardDelete(card._id);\r\n  }\r\n\r\n  //получаем стейт текущего пользователя\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  //определяем создана карточка нами\r\n  const isOwn = card.owner._id === currentUser._id;\r\n  //определяем лайкнута ли карточка нами\r\n  const isLiked = card.likes.some(like=>like._id === currentUser._id);\r\n\r\n  //показывать кнопку удаления, если карточка создана нами\r\n  const cardDeleteButtonDisplay = (`${isOwn ? \"block\" : \"none\"}`);\r\n  const cardLikeButtonClassName = (`${isLiked && \"cards__like_clicked\"}`);\r\n\r\n  return (\r\n    <div className=\"cards__item\">\r\n        <img src={`${card.link}`} alt={card.name} className=\"cards__photo\" onClick={handleClick}/>\r\n        <button type=\"button\" className=\"button__delete\" style={{display:cardDeleteButtonDisplay}} onClick={handleDeleteClick}></button>\r\n        <div className=\"cards__rectangle\">\r\n          <h2 className=\"cards__name\">{card.name}</h2>\r\n          <div>\r\n            <button type=\"button\" className={`cards__like ${cardLikeButtonClassName}`} onClick={handleLikeClick}></button>\r\n            <p className=\"cards__like-number\">{card.likes.length}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default Card;\r\n","import React from \"react\";\r\nimport Card from \"./Card\";\r\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\r\n\r\nfunction Main({onEditProfile,onAddPlace,onEditAvatar, onCardClick, cards, onCardDelete, onCardLike, email, onSignOut}) {\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <>\r\n     <section className=\"profile page__profile\">\r\n       <div className=\"profile__person\">\r\n         <div className=\"profile__avatar\" onClick={onEditAvatar} style={{backgroundImage: `url(${currentUser.avatar})`}}></div>\r\n         <div className=\"profile__info\">\r\n           <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n           <button type=\"button\" className=\"profile__button-edit\" onClick={onEditProfile}></button>\r\n           <p className=\"profile__description\">{currentUser.about}</p>\r\n         </div>\r\n       </div>\r\n       <button type=\"button\" className=\"profile__button-add\" onClick={onAddPlace}></button>\r\n     </section>\r\n      <section className=\"cards\">\r\n        {\r\n         cards.map((card)=> (<Card\r\n           key          = {card._id}\r\n           onCardClick  = {onCardClick}\r\n           onCardLike   = {onCardLike}\r\n           onCardDelete = {onCardDelete}\r\n           card         = {card}/>\r\n           )\r\n         )\r\n        }</section>\r\n      </>);\r\n}\r\nexport default Main;\r\n","\r\nfunction Footer () {\r\n  const date = new Date();\r\n\r\n  return (\r\n    <footer className=\"footer page__footer\">\r\n      <p className=\"footer__text\">&#169; {date.getFullYear().toString()} Mesto Russia</p>\r\n    </footer>);\r\n}\r\n\r\nexport default Footer;\r\n","function ImagePopup({card, onClose}) {\n  return (\n    <div className={`popup popup_type_image ${card.isOpen && 'popup_opened'}`}>\n      <div className=\"popup__container\">\n        <figure className=\"popup__figure\">\n          <img className=\"popup__photo\" alt={`${card.name}`} src={card.link}/>\n          <figcaption className=\"popup__image-title\">{card.name}</figcaption>\n        </figure>\n        <button type=\"button\" className=\"popup__close\" onClick={onClose}></button>\n      </div>\n    </div>\n  )\n}\n\nexport default ImagePopup;\n","class Api {\r\n  constructor({baseUrl, headers}) {\r\n    this._baseUrl = baseUrl;\r\n    this._headers=headers;\r\n  }\r\n\r\n  _getResponseData(res) {\r\n    if (!res.ok) {\r\n      return Promise.reject(`Произошла ошибка ${res.status}`);\r\n    }\r\n    return res.json();\r\n  }\r\n\r\n  //запрос информации с сервера о данных пользователя\r\n  getInfo() {\r\nreturn fetch(`${this._baseUrl}/users/me`, {\r\n  headers:this._headers})\r\n  .then(this._getResponseData);\r\n  }\r\n\r\n  //отправка новых данных о пользователе на сервер\r\n  setInfo({name, about}) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name,\r\n        about\r\n      })\r\n    })\r\n  .then(this._getResponseData);\r\n  }\r\n\r\n  //Изменение аватарки на сервере\r\n  setAvatar(avatarLink) {\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        avatar: avatarLink,\r\n      })\r\n    })\r\n      .then(this._getResponseData);\r\n  }\r\n\r\n  //запрос данных с сервера для получения карточек\r\n  getCards() {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      headers:this._headers})\r\n      .then(this._getResponseData);\r\n  }\r\n\r\n  //сбор всех данных для загрузки страницы\r\n  getAllData() {\r\n    return Promise.all([this.getInfo(), this.getCards()]);\r\n  }\r\n\r\n  //добавление карточки на сервер\r\n  addCard(data) {\r\n    return fetch(`${this._baseUrl}/cards `, {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        link: data.link\r\n      })\r\n    })\r\n      .then(this._getResponseData);\r\n  }\r\n\r\n  //удаление карточки с сервера\r\n  deleteCard(id) {\r\n    return fetch(`${this._baseUrl}/cards/${id} `, {\r\n      method: 'DELETE',\r\n      headers: this._headers\r\n    })\r\n      .then(this._getResponseData);\r\n  }\r\n\r\n  //Установка лайка\r\n  addLike(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${cardId} `, {\r\n      method: 'PUT',\r\n      headers: this._headers\r\n    })\r\n  }\r\n\r\n//удаление лайка с сервера\r\n  removeLike(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${cardId} `, {\r\n      method: 'DELETE',\r\n      headers: this._headers\r\n    })\r\n  }\r\n\r\n  changeLikeCardStatus(cardId, isLiked) {\r\n  if(!isLiked) {\r\n      return this.removeLike(cardId).then(this._getResponseData);\r\n    }\r\n  else {\r\n    return this.addLike(cardId).then(this._getResponseData)\r\n  }\r\n  }\r\n}\r\n\r\n\r\n\r\nconst api = new Api({\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-16',\r\n  headers: {\r\n    authorization: '842f9f83-d4fc-40ad-8c5d-37f5b812d684',\r\n    'Content-Type': 'application/json'\r\n  }\r\n});\r\nexport default api;\r\n\r\n","import React from \"react\";\n\nfunction PopupWithForm({title,name, children, submitButton, isOpen, onClose, onSubmit}) {\n\n  return (\n    <div className={`popup popup_type_${name} ${isOpen && 'popup_opened'}`}>\n      <form className=\"popup__form\" name={`popup-${name}`} onSubmit={onSubmit}>\n        <h2 className=\"popup__title\">{title}</h2>\n        {children}\n        <button type=\"submit\" className=\"popup__submit\">{submitButton}</button>\n        <button type=\"button\" className=\"popup__close\" onClick={onClose}></button>\n      </form>\n    </div>\n  )\n}\n\nexport default PopupWithForm;\n","import PopupWithForm from \"./PopupWithForm\";\nimport React from \"react\";\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\n\n\nfunction EditProfilePopup ({isOpen, onClose, onUpdateUser, isLoading}) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const [name, setName] = React.useState(currentUser.name);\n  const [description, setDescription] = React.useState(currentUser.about);\n\n  React.useEffect(()=>{\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  },[currentUser])\n\n  function handleChangeName (e) {\n    setName(e.target.value)\n  }\n\n  function handleChangeDescription (e) {\n    setDescription(e.target.value)\n  }\n\n   function handleSubmit(e) {\n      e.preventDefault();\n     onUpdateUser({\n       name, about: description\n     })\n   }\n\n  return (\n    <PopupWithForm\n      title = \"Редактировать профиль\"\n      name = \"edit\"\n      submitButton ={`${isLoading ? \"Сохранение\" : \"Сохранить\"}`}\n      isOpen = {isOpen}\n      onClose = {onClose}\n      onSubmit={handleSubmit}>\n      <label className=\"popup__input-container\">\n        <input id=\"name-input\" type=\"text\" className=\"popup__text popup__text_type_name\" name=\"name\"\n               placeholder=\"Имя\" minLength=\"2\" maxLength=\"40\"\n               required value={name||''} onChange={handleChangeName}/>\n        <span id=\"name-input-error\" className=\"popup__error\"></span>\n      </label>\n      <label className=\"popup__input-container\">\n        <input id=\"description-input\" type=\"text\" className=\"popup__text popup__text_type_description\"\n               name=\"description\" value={description||''} placeholder=\"Описание\" minLength=\"2\"\n               maxLength=\"200\" required onChange={handleChangeDescription}/>\n        <span id=\"description-input-error\" className=\"popup__error\"></span>\n      </label>\n    </PopupWithForm>\n  );\n}\n\nexport default EditProfilePopup;\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction EditAvatarPopup ({isOpen, onClose, onUpdateAvatar, isLoading}) {\r\n\r\n  const avatarInput = React.useRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateAvatar(avatarInput.current.value);\r\n    avatarInput.current.value = \"\";\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title        = \"Обновить аватар\"\r\n      name         = \"avatar\"\r\n      submitButton = {`${isLoading ? \"Сохранение\" : \"Сохранить\"}`}\r\n      isOpen       = {isOpen}\r\n      onClose      = {onClose}\r\n      onSubmit     = {handleSubmit}>\r\n        <label className=\"popup__input-container\">\r\n          <input id=\"avatar-url-input\" type=\"url\" className=\"popup__text popup__text_type_avatar\"\r\n                 name=\"avatar\" placeholder=\"Ссылка на новый аватар\" required ref={avatarInput}/>\r\n          <span id=\"avatar-url-input-error\" className=\"popup__error\"></span>\r\n        </label>\r\n  </PopupWithForm>);\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction AddPlacePopup ({isOpen, onClose, onAddPlace, isLoading}) {\r\n\r\n  const [name, setName] = React.useState(\"\");\r\n  const [link, setLink] = React.useState(\"\");\r\n\r\n  function handleChangeName (e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handleChangeLink (e) {\r\n    setLink(e.target.value);\r\n  }\r\n\r\n  function handleAddPlace(e) {\r\n  e.preventDefault();\r\n  onAddPlace({name,link});\r\n  setName(\"\");\r\n  setLink(\"\");\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title        = \"Новое место\"\r\n      name         = \"new-item\"\r\n      submitButton = {`${isLoading ? \"Создание\" : \"Создать\"}`}\r\n      isOpen       = {isOpen}\r\n      onClose      = {onClose}\r\n      onSubmit     = {handleAddPlace}>\r\n      <label className=\"popup__input-container\">\r\n        <input id=\"picture-name-input\" type=\"text\" className=\"popup__text popup__text_type_picture-name\"\r\n               name=\"picture_name\" placeholder=\"Название\" minLength=\"1\"\r\n               maxLength=\"30\" onChange={handleChangeName} value={name||''} required/>\r\n        <span id=\"picture-name-input-error\" className=\"popup__error\"></span>\r\n      </label>\r\n      <label className=\"popup__input-container\">\r\n        <input id=\"url-input\" type=\"url\" className=\"popup__text popup__text_type_link\" name=\"link\"\r\n               placeholder=\"Ссылка на картинку\" onChange={handleChangeLink} value={link||''} required/>\r\n        <span id=\"url-input-error\" className=\"popup__error\"></span>\r\n      </label>\r\n  </PopupWithForm>);\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","import React from 'react';\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction ConfirmDeletePopup ({cardId, onSubmit, onClose, isOpen }) {\r\n\r\n  function handleSubmitForm (e) {\r\n    e.preventDefault();\r\n    onSubmit(cardId)\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title        = \"Вы уверены?\"\r\n      name         = \"submit\"\r\n      submitButton = \"Да\"\r\n      isOpen       = {isOpen}\r\n      onClose      = {onClose}\r\n      onSubmit     = {handleSubmitForm}/>\r\n  )\r\n}\r\n\r\nexport default ConfirmDeletePopup;\r\n","import React from \"react\";\r\n\r\nfunction Login ({handleLogin}) {\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n\r\n  const handleEmailChange = (e) => setEmail(e.target.value);\r\n  const handlePasswordChange = (e) => setPassword(e.target.value);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    handleLogin(email, password);\r\n  }\r\n\r\n  return (\r\n    <form className=\"form\" onSubmit={handleSubmit}>\r\n      <h2 className=\"form__title\">Вход</h2>\r\n      <input className=\"form__input\" placeholder=\"Email\" type=\"email\" onChange={handleEmailChange}/>\r\n      <input className=\"form__input\" placeholder=\"Пароль\" type=\"password\" onChange={handlePasswordChange}/>\r\n      <button type=\"submit\" className=\"form__submit-button\">Войти</button>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction Register ({handleRegister}) {\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n\r\n\r\n  const handleEmailChange = (e) => setEmail(e.target.value);\r\n  const handlePasswordChange = (e) => setPassword(e.target.value);\r\n\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    handleRegister(email, password);\r\n  }\r\n\r\n  return (\r\n         <form className=\"form\" onSubmit={handleSubmit}>\r\n          <h2 className=\"form__title\">Регистрация</h2>\r\n          <input className=\"form__input\" placeholder=\"Email\" type=\"email\" onChange={handleEmailChange}/>\r\n          <input className=\"form__input\" placeholder=\"Пароль\" type=\"password\" onChange={handlePasswordChange}/>\r\n          <button type=\"submit\" className=\"form__submit-button\">Зарегестрироваться</button>\r\n          <p className=\"form__text\">Уже зарегистрированы? <Link to=\"/sign-in\" className=\"form__link\">Войти</Link></p>\r\n        </form>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\r\n  return (\r\n    <Route>\r\n      {\r\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" />\r\n      }\r\n    </Route>\r\n  )}\r\n\r\nexport default ProtectedRoute;\r\n","export const AUTH_URL = 'https://auth.nomoreparties.co';\r\n\r\n\r\nconst getResponseData = (res) => {\r\n  if (!res.ok) {\r\n    return Promise.reject(`Произошла ошибка ${res.status}`);\r\n  }\r\n  return res.json();\r\n}\r\n\r\nexport const register = (email, password) => {\r\n  return fetch(`${AUTH_URL}/signup` , {\r\n    method: 'POST',\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    body: JSON.stringify({email, password})})\r\n    .then(response => getResponseData(response));\r\n  }\r\n\r\n  export const authorize = (email, password) => {\r\n  return fetch(`${AUTH_URL}/signin`, {\r\n    method: 'POST',\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    body: JSON.stringify({email, password})})\r\n      .then(response => getResponseData(response));\r\n  }\r\n\r\n  export const checkTokenValidity = (token) => {\r\n  return fetch(`${AUTH_URL}/users/me`,{\r\n    method: 'GET',\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Authorization\" : `Bearer ${token}`\r\n    }\r\n  })\r\n    .then(response => getResponseData(response));\r\n  }\r\n\r\n\r\n","export default __webpack_public_path__ + \"static/media/logo.c2821b38.svg\";","import logo from '../images/logo.svg';\r\nimport {Link, Route} from \"react-router-dom\";\r\n\r\nfunction Header({email, handleSignOut}) {\r\n    return (\r\n        <header className=\"header page__header\">\r\n            <img src={logo} alt=\"Логотип\" className=\"header__logo\"/>\r\n\r\n          <Route path=\"/sign-in\">\r\n            <Link className=\"header__text\" to=\"sign-up\">Регистрация</Link>\r\n          </Route>\r\n          <Route path=\"/sign-up\">\r\n            <Link className=\"header__text\" to=\"sign-in\">Войти</Link>\r\n          </Route>\r\n\r\n          <Route exact path=\"/\">\r\n            <div className=\"header__container\">\r\n              <p className=\"header__email\">{email}</p>\r\n              <button className=\"header__logout-button\" onClick={handleSignOut}>Выйти</button>\r\n            </div>\r\n          </Route>\r\n\r\n        </header>)\r\n}\r\nexport default Header;\r\n","export default __webpack_public_path__ + \"static/media/done-picture.a9eb6caf.svg\";","export default __webpack_public_path__ + \"static/media/error-picture.d4ce2a26.svg\";","import React from \"react\";\r\nimport donePicture from \"../images/done-picture.svg\";\r\nimport pictureError from '../images/error-picture.svg'\r\nimport {Route} from \"react-router-dom\";\r\n\r\nfunction InfoTooltip ({ onClose, isOpen }) {\r\n\r\n  return (\r\n    <div className={`popup ${isOpen && 'popup_opened'}`}>\r\n      <div className=\"popup__form\">\r\n\r\n        <Route path=\"/sign-up\">\r\n          <img className=\"popup__picture-title\"\r\n               src={donePicture} alt=\"Зарегестрированы\"></img>\r\n          <h2 className=\"popup__title popup__title_position_center\">Вы успешно зарегистрировались!</h2>\r\n          <button type=\"button\" className=\"popup__close\" onClick={onClose}></button>\r\n        </Route>\r\n\r\n        <Route path=\"/sign-in\">\r\n          <img className=\"popup__picture-title\"\r\n               src={pictureError} alt=\"Ошибка\"></img>\r\n          <h2 className=\"popup__title popup__title_position_center\">Что-то пошло не так! Попробуйте ещё раз.</h2>\r\n          <button type=\"button\" className=\"popup__close\" onClick={onClose}></button>\r\n        </Route>\r\n\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default InfoTooltip;\r\n","import React from \"react\";\r\nimport {Route, Redirect, Switch, useHistory} from \"react-router-dom\";\r\nimport Main from \"./Main\";\r\nimport Footer from \"./Footer\";\r\nimport ImagePopup from \"./ImagePopup\";\r\nimport api from \"../utils/api\";\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\nimport EditProfilePopup from \"./EditProfilePopup\";\r\nimport EditAvatarPopup from \"./EditAvatarPopup\";\r\nimport AddPlacePopup from \"./AddPlacePopup\";\r\nimport ConfirmDeletePopup from \"./ConfirmDeletePopup\";\r\nimport Login from \"./Login\";\r\nimport Register from \"./Register\";\r\nimport ProtectedRoute from \"./ProtectedRoute\";\r\nimport * as auth from '../utils/auth';\r\nimport Header from \"./Header\";\r\nimport InfoTooltip from \"./InfoTooltip\";\r\n\r\nfunction App() {\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\r\n  const [isDeleteSubmitPopupOpen, setIsDeleteSubmitPopupOpen] = React.useState(false);\r\n  const [selectedCard, setSelectedCard] = React.useState({isOpen: false, link:'', name:''});\r\n  const [currentUser, setCurrentUser] = React.useState({});\r\n  const [cards, setCards] = React.useState([]);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [cardIdToDelete, setCardIdToDelete] = React.useState(null);\r\n  const [loggedIn, setLoggedIn] = React.useState(false);\r\n  const [email, setEmail] = React.useState(\"\");\r\n  const [infoTooltipIsOpened, setInfoTooltipIsOpened] = React.useState(false);\r\n  const history = useHistory();\r\n\r\n  //проверка токена\r\n  const tokenCheck = () => {\r\n    const jwt = localStorage.getItem('jwt');\r\n    if(jwt){\r\n      auth.checkTokenValidity(jwt)\r\n      .then(data=>{\r\n        if(data) {\r\n          setEmail(data.data.email);\r\n          setLoggedIn(true);\r\n          history.push(\"/\");\r\n        }\r\n      })\r\n    }\r\n    else {\r\n      localStorage.removeItem('jwt');\r\n    }\r\n  }\r\n\r\n  // выход из пользователя\r\n  const handleSignOut = () => {\r\n    localStorage.removeItem('jwt');\r\n      setLoggedIn(false);\r\n      history.push('/sign-in')\r\n  }\r\n\r\n  //вход в пользователя\r\n  const handleSignIn = (email,password) => {\r\n    auth.authorize(email, password)\r\n      .then(data => {\r\n        if(data.token) {\r\n          localStorage.setItem('jwt', data.token);\r\n          history.push(\"/\");\r\n          setLoggedIn(true);\r\n        }\r\n      })\r\n      .catch(err=>{\r\n        setInfoTooltipIsOpened(true);\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  // регистрация пользователя\r\n  const handleRegister = (email, password) => {\r\n    auth.register(email, password)\r\n      .then(data => {\r\n        if (data) {\r\n          setInfoTooltipIsOpened(true);\r\n        }\r\n      })\r\n      .catch(err => console.log(err));\r\n  }\r\n\r\n  //получение данных\r\n  React.useEffect(()=>{\r\n    Promise.all([api.getInfo(), api.getCards()])\r\n      .then(([userInfo, cards])=>{\r\n        setCurrentUser(userInfo);\r\n        setCards(cards);\r\n      })\r\n      .catch(err => console.log(err))},[]);\r\n\r\n  React.useEffect(()=>{\r\n    tokenCheck();\r\n  },[loggedIn]);\r\n\r\n  //функции для установки состояния открытого попапа\r\n    function handleEditAvatarClick () {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n    function handleEditProfileClick (){\r\n      setIsEditProfilePopupOpen(true);\r\n  }\r\n    function handleAddPlaceClick () {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function handleCardClick({name, link}) {\r\n      setSelectedCard({isOpen:true, name:name, link: link})\r\n  }\r\n\r\n  //функция закрытия попапов\r\n  function closeAllPopups () {\r\n      setIsEditAvatarPopupOpen(false);\r\n      setIsAddPlacePopupOpen(false);\r\n      setIsEditProfilePopupOpen(false);\r\n      setIsDeleteSubmitPopupOpen(false);\r\n      setSelectedCard({isOpen:false, link: \"\",name: \"\"});\r\n      setCardIdToDelete(null);\r\n      setInfoTooltipIsOpened(false)\r\n  }\r\n\r\n  //функция отвечающая за апдейт данных у пользователя\r\n   function handleUpdateUser({name, about}) {\r\n   setLoading(true);\r\n    api.setInfo({name, about})\r\n      .then((info) => {\r\n      setCurrentUser(info);\r\n      closeAllPopups();\r\n  })\r\n      .catch(err => console.log(err))\r\n      .finally(()=>setLoading(false))\r\n   }\r\n\r\n   //функция для обновления аватара на сервере\r\n   function handleUpdateAvatar (avatarLink) {\r\n     setLoading(true);\r\n     api.setAvatar(avatarLink)\r\n      .then((info) => {\r\n        setCurrentUser(info);\r\n        closeAllPopups();\r\n      })\r\n      .catch(err => console.log(err))\r\n       .finally(()=>setLoading(false))\r\n   }\r\n\r\n   //функция для лайка карточек\r\n  function handleCardLike (card) {\r\n    const isLiked = card.likes.some(like => like._id ===currentUser._id);\r\n    api.changeLikeCardStatus(card._id, !isLiked)\r\n      .then((newCard)=>{\r\n      const newCards = cards.map(cardItem=>cardItem._id === card._id ? newCard : cardItem);\r\n      setCards(newCards);\r\n    })\r\n      .catch(err => console.log(err))\r\n  }\r\n\r\n  //функция для открытия попапа подтверждения удаления, передача в ней ид карточки\r\n  function handleCardDelete (cardId) {\r\n      setCardIdToDelete(cardId);\r\n      setIsDeleteSubmitPopupOpen(true);\r\n  }\r\n\r\n  //функция для удаления карточки при submit\r\n  function handleCardDeleteSubmit (cardId) {\r\n    api.deleteCard(cardId).then(()=>{\r\n      const newCards = cards.filter(cardItem=> cardItem._id !== cardId);\r\n      setCards(newCards);\r\n      setCardIdToDelete(null);\r\n      closeAllPopups()}\r\n    )\r\n      .catch(err => console.log(err))\r\n  }\r\n\r\n  //функция для добавления карточек\r\n  function handleAddPlaceSubmit (data) {\r\n    setLoading(true);\r\n    api.addCard(data)\r\n      .then(card=>{\r\n        setCards([card, ...cards])\r\n        closeAllPopups();\r\n      })\r\n      .catch(err => console.log(err))\r\n      .finally(()=>setLoading(false))\r\n  }\r\n\r\n  return (\r\n\r\n      <div className=\"page\">\r\n        <CurrentUserContext.Provider value={currentUser}>\r\n          <Header\r\n          email={email}\r\n          handleSignOut={handleSignOut}/>\r\n          <main className=\"content\">\r\n          <Switch>\r\n            <Route path=\"/sign-in\">\r\n              <Login handleLogin = {handleSignIn}/>\r\n            </Route>\r\n\r\n            <Route path=\"/sign-up\">\r\n              <Register handleRegister={handleRegister}/>\r\n            </Route>\r\n\r\n            <ProtectedRoute exact path=\"/\"\r\n                          loggedIn={loggedIn}\r\n                          component={Main}\r\n                          onEditAvatar  = {handleEditAvatarClick}\r\n                          onEditProfile = {handleEditProfileClick}\r\n                          onAddPlace    = {handleAddPlaceClick}\r\n                          onCardClick   = {handleCardClick}\r\n                          cards         = {cards}\r\n                          onCardLike    = {handleCardLike}\r\n                          onCardDelete  = {handleCardDelete}\r\n                          email         = {email}\r\n                          onSignOut     = {handleSignOut}\r\n          >\r\n            </ProtectedRoute>\r\n\r\n            <Route>\r\n              {loggedIn ? <Redirect to=\"/\"/> : <Redirect to=\"/sign-in\"/>}\r\n            </Route>\r\n\r\n          </Switch>\r\n          </main>\r\n\r\n          <EditProfilePopup\r\n            isOpen       = {isEditProfilePopupOpen}\r\n            onClose      = {closeAllPopups}\r\n            onUpdateUser = {handleUpdateUser}\r\n            isLoading    = {loading}/>\r\n\r\n          <EditAvatarPopup\r\n            isOpen         = {isEditAvatarPopupOpen}\r\n            onClose        = {closeAllPopups}\r\n            onUpdateAvatar = {handleUpdateAvatar}\r\n            isLoading      = {loading}/>\r\n\r\n          <AddPlacePopup\r\n            isOpen     = {isAddPlacePopupOpen}\r\n            onClose    = {closeAllPopups}\r\n            onAddPlace = {handleAddPlaceSubmit}\r\n            isLoading  = {loading}\r\n          />\r\n\r\n          <ConfirmDeletePopup\r\n            isOpen   = {isDeleteSubmitPopupOpen}\r\n            cardId   = {cardIdToDelete}\r\n            onSubmit = {handleCardDeleteSubmit}\r\n            onClose  = {closeAllPopups}/>\r\n\r\n          <ImagePopup\r\n            card    = {selectedCard}\r\n            onClose = {closeAllPopups}/>\r\n\r\n          <InfoTooltip\r\n            isOpen = {infoTooltipIsOpened}\r\n            onClose = {closeAllPopups}/>\r\n\r\n          <Footer />\r\n\r\n        </CurrentUserContext.Provider>\r\n\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport {BrowserRouter} from \"react-router-dom\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n    <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}
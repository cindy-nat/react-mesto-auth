{"version":3,"sources":["contexts/CurrentUserContext.js","components/Card.js","images/logo.svg","components/Header.js","components/Main.js","components/Footer.js","components/ImagePopup.js","utils/api.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ConfirmDeletePopup.js","components/InfoTooltip.js","utils/auth.js","images/error-picture.svg","components/Login.js","images/done-picture.svg","components/Register.js","components/ProtectedRoute.js","components/App.js","reportWebVitals.js","index.js"],"names":["CurrentUserContext","React","createContext","Card","onCardClick","onCardLike","onCardDelete","card","currentUser","useContext","isOwn","owner","_id","isLiked","likes","some","like","cardDeleteButtonDisplay","cardLikeButtonClassName","className","src","link","alt","name","onClick","type","style","display","length","Header","email","text","textColor","handleSignOut","logo","color","to","Main","onEditProfile","onAddPlace","onEditAvatar","cards","onSignOut","backgroundImage","avatar","about","map","Footer","date","Date","getFullYear","toString","ImagePopup","onClose","isOpen","api","baseUrl","headers","this","_baseUrl","_headers","res","ok","json","Promise","reject","status","fetch","then","_getResponseData","method","body","JSON","stringify","avatarLink","all","getInfo","getCards","data","id","cardId","addLike","removeLike","authorization","PopupWithForm","title","children","submitButton","onSubmit","EditProfilePopup","onUpdateUser","isLoading","useState","setName","description","setDescription","useEffect","e","preventDefault","placeholder","minLength","maxLength","required","value","onChange","target","EditAvatarPopup","onUpdateAvatar","avatarInput","useRef","current","ref","AddPlacePopup","setLink","ConfirmDeletePopup","InfoTooltip","picture","AUTH_URL","getResponseData","withRouter","handleLogin","setEmail","password","setPassword","infoTooltipIsOpened","setInfoTooltip","history","useHistory","response","Auth","token","localStorage","setItem","push","catch","err","console","log","pictureError","Register","donePicture","ProtectedRoute","Component","component","props","loggedIn","App","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isDeleteSubmitPopupOpen","setDeleteSubmitPopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","loading","setLoading","cardIdToDelete","setCardIdToDelete","setLoggedIn","tokenCheck","jwt","getItem","closeAllPopups","info","userInfo","path","Provider","exact","changeLikeCardStatus","newCard","newCards","cardItem","removeItem","setInfo","finally","setAvatar","addCard","deleteCard","filter","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.27b0831b.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n\r\n","import React from \"react\";\r\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\r\n\r\nfunction Card({onCardClick, onCardLike, onCardDelete, card}) {\r\n\r\n  function handleClick() {\r\n      onCardClick({name:card.name,link:card.link});\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    onCardLike(card);\r\n  }\r\n\r\n  function handleDeleteClick() {\r\n    onCardDelete(card._id);\r\n  }\r\n\r\n  //получаем стейт текущего пользователя\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  //определяем создана карточка нами\r\n  const isOwn = card.owner._id === currentUser._id;\r\n  //определяем лайкнута ли карточка нами\r\n  const isLiked = card.likes.some(like=>like._id === currentUser._id);\r\n\r\n  //показывать кнопку удаления, если карточка создана нами\r\n  const cardDeleteButtonDisplay = (`${isOwn ? \"block\" : \"none\"}`);\r\n  const cardLikeButtonClassName = (`${isLiked && \"cards__like_clicked\"}`);\r\n\r\n  return (\r\n    <div className=\"cards__item\">\r\n        <img src={`${card.link}`} alt={card.name} className=\"cards__photo\" onClick={handleClick}/>\r\n        <button type=\"button\" className=\"button__delete\" style={{display:cardDeleteButtonDisplay}} onClick={handleDeleteClick}></button>\r\n        <div className=\"cards__rectangle\">\r\n          <h2 className=\"cards__name\">{card.name}</h2>\r\n          <div>\r\n            <button type=\"button\" className={`cards__like ${cardLikeButtonClassName}`} onClick={handleLikeClick}></button>\r\n            <p className=\"cards__like-number\">{card.likes.length>0 && card.likes.length}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default Card;\r\n","export default __webpack_public_path__ + \"static/media/logo.c2821b38.svg\";","import logo from '../images/logo.svg';\r\nimport {Link} from \"react-router-dom\";\r\n\r\nfunction Header({email, text, textColor, link, handleSignOut}) {\r\n    return (\r\n        <header className=\"header page__header\">\r\n            <img src={logo} alt=\"Логотип\" className=\"header__logo\"/>\r\n          <div className=\"header__small-screen-lines\"> </div>\r\n            <div className=\"header__container\">\r\n              <p className=\"header__email\">{email}</p>\r\n              <Link className=\"header__text\"\r\n                    style={{color:`${textColor}`}}\r\n                    to={`${link}`}\r\n                    onClick = {handleSignOut}\r\n              >{text}</Link>\r\n            </div>\r\n        </header>)\r\n}\r\nexport default Header;\r\n","import React from \"react\";\r\nimport Card from \"./Card\";\r\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\r\nimport Header from \"./Header\";\r\n\r\nfunction Main({onEditProfile,onAddPlace,onEditAvatar, onCardClick, cards, onCardDelete, onCardLike, email, onSignOut}) {\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <>\r\n    <Header\r\n    email={email}\r\n    text=\"Выйти\"\r\n    textColor=\"#A9A9A9\"\r\n    handleSignOut = {onSignOut}/>\r\n  <main className=\"content\">\r\n     <section className=\"profile page__profile\">\r\n       <div className=\"profile__person\">\r\n         <div className=\"profile__avatar\" onClick={onEditAvatar} style={{backgroundImage: `url(${currentUser.avatar})`}}></div>\r\n         <div className=\"profile__info\">\r\n           <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n           <button type=\"button\" className=\"profile__button-edit\" onClick={onEditProfile}></button>\r\n           <p className=\"profile__description\">{currentUser.about}</p>\r\n         </div>\r\n       </div>\r\n       <button type=\"button\" className=\"profile__button-add\" onClick={onAddPlace}></button>\r\n     </section>\r\n      <section className=\"cards\">\r\n        {\r\n         cards.map((card)=> <Card\r\n           key          = {card._id}\r\n           onCardClick  = {onCardClick}\r\n           onCardLike   = {onCardLike}\r\n           onCardDelete = {onCardDelete}\r\n           card         = {card}/>)\r\n        }</section>\r\n    </main>\r\n      </>);\r\n}\r\nexport default Main;\r\n","\r\nfunction Footer () {\r\n  const date = new Date();\r\n\r\n  return (\r\n    <footer className=\"footer page__footer\">\r\n      <p className=\"footer__text\">&#169; {date.getFullYear().toString()} Mesto Russia</p>\r\n    </footer>);\r\n}\r\n\r\nexport default Footer;\r\n","function ImagePopup({card, onClose}) {\n  return (\n    <div className={`popup popup_type_image ${card.isOpen && 'popup_opened'}`}>\n      <div className=\"popup__container\">\n        <figure className=\"popup__figure\">\n          <img className=\"popup__photo\" alt={`${card.name}`} src={card.link}/>\n          <figcaption className=\"popup__image-title\">{card.name}</figcaption>\n        </figure>\n        <button type=\"button\" className=\"popup__close\" onClick={onClose}></button>\n      </div>\n    </div>\n  )\n}\n\nexport default ImagePopup;\n","class Api {\r\n  constructor({baseUrl, headers}) {\r\n    this._baseUrl = baseUrl;\r\n    this._headers=headers;\r\n  }\r\n\r\n  _getResponseData(res) {\r\n    if (!res.ok) {\r\n      return Promise.reject(`Произошла ошибка ${res.status}`);\r\n    }\r\n    return res.json();\r\n  }\r\n\r\n  //запрос информации с сервера о данных пользователя\r\n  getInfo() {\r\nreturn fetch(`${this._baseUrl}/users/me`, {\r\n  headers:this._headers})\r\n  .then(this._getResponseData);\r\n  }\r\n\r\n  //отправка новых данных о пользователе на сервер\r\n  setInfo({name, about}) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name,\r\n        about\r\n      })\r\n    })\r\n  .then(this._getResponseData);\r\n  }\r\n\r\n  //Изменение аватарки на сервере\r\n  setAvatar(avatarLink) {\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        avatar: avatarLink,\r\n      })\r\n    })\r\n      .then(this._getResponseData);\r\n  }\r\n\r\n  //запрос данных с сервера для получения карточек\r\n  getCards() {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      headers:this._headers})\r\n      .then(this._getResponseData);\r\n  }\r\n\r\n  //сбор всех данных для загрузки страницы\r\n  getAllData() {\r\n    return Promise.all([this.getInfo(), this.getCards()]);\r\n  }\r\n\r\n  //добавление карточки на сервер\r\n  addCard(data) {\r\n    return fetch(`${this._baseUrl}/cards `, {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        link: data.link\r\n      })\r\n    })\r\n      .then(this._getResponseData);\r\n  }\r\n\r\n  //удаление карточки с сервера\r\n  deleteCard(id) {\r\n    return fetch(`${this._baseUrl}/cards/${id} `, {\r\n      method: 'DELETE',\r\n      headers: this._headers\r\n    })\r\n      .then(this._getResponseData);\r\n  }\r\n\r\n  //Установка лайка\r\n  addLike(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${cardId} `, {\r\n      method: 'PUT',\r\n      headers: this._headers\r\n    })\r\n  }\r\n\r\n//удаление лайка с сервера\r\n  removeLike(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${cardId} `, {\r\n      method: 'DELETE',\r\n      headers: this._headers\r\n    })\r\n  }\r\n\r\n  changeLikeCardStatus(cardId, isLiked) {\r\n  if(!isLiked) {\r\n      return this.removeLike(cardId).then(this._getResponseData);\r\n    }\r\n  else {\r\n    return this.addLike(cardId).then(this._getResponseData)\r\n  }\r\n  }\r\n}\r\n\r\n\r\n\r\nconst api = new Api({\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-16',\r\n  headers: {\r\n    authorization: '842f9f83-d4fc-40ad-8c5d-37f5b812d684',\r\n    'Content-Type': 'application/json'\r\n  }\r\n});\r\nexport default api;\r\n\r\n","import React from \"react\";\n\nfunction PopupWithForm({title,name, children, submitButton, isOpen, onClose, onSubmit}) {\n\n  return (\n    <div className={`popup popup_type_${name} ${isOpen && 'popup_opened'}`}>\n      <form className=\"popup__form\" name={`popup-${name}`} onSubmit={onSubmit}>\n        <h2 className=\"popup__title\">{title}</h2>\n        {children}\n        <button type=\"submit\" className=\"popup__submit\">{submitButton}</button>\n        <button type=\"button\" className=\"popup__close\" onClick={onClose}></button>\n      </form>\n    </div>\n  )\n}\n\nexport default PopupWithForm;\n","import PopupWithForm from \"./PopupWithForm\";\nimport React from \"react\";\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\n\n\nfunction EditProfilePopup ({isOpen, onClose, onUpdateUser, isLoading}) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const [name, setName] = React.useState(currentUser.name);\n  const [description, setDescription] = React.useState(currentUser.about);\n\n  React.useEffect(()=>{\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  },[currentUser])\n\n  function handleChangeName (e) {\n    setName(e.target.value)\n  }\n\n  function handleChangeDescription (e) {\n    setDescription(e.target.value)\n  }\n\n   function handleSubmit(e) {\n      e.preventDefault();\n     onUpdateUser({\n       name, about: description\n     })\n   }\n\n  return (\n    <PopupWithForm\n      title = \"Редактировать профиль\"\n      name = \"edit\"\n      submitButton ={`${isLoading ? \"Сохранение\" : \"Сохранить\"}`}\n      isOpen = {isOpen}\n      onClose = {onClose}\n      onSubmit={handleSubmit}>\n      <label className=\"popup__input-container\">\n        <input id=\"name-input\" type=\"text\" className=\"popup__text popup__text_type_name\" name=\"name\"\n               placeholder=\"Имя\" minLength=\"2\" maxLength=\"40\"\n               required value={name||''} onChange={handleChangeName}/>\n        <span id=\"name-input-error\" className=\"popup__error\"></span>\n      </label>\n      <label className=\"popup__input-container\">\n        <input id=\"description-input\" type=\"text\" className=\"popup__text popup__text_type_description\"\n               name=\"description\" value={description||''} placeholder=\"Описание\" minLength=\"2\"\n               maxLength=\"200\" required onChange={handleChangeDescription}/>\n        <span id=\"description-input-error\" className=\"popup__error\"></span>\n      </label>\n    </PopupWithForm>\n  );\n}\n\nexport default EditProfilePopup;\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction EditAvatarPopup ({isOpen, onClose, onUpdateAvatar, isLoading}) {\r\n\r\n  const avatarInput = React.useRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateAvatar(avatarInput.current.value);\r\n    avatarInput.current.value = \"\";\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title        = \"Обновить аватар\"\r\n      name         = \"avatar\"\r\n      submitButton = {`${isLoading ? \"Сохранение\" : \"Сохранить\"}`}\r\n      isOpen       = {isOpen}\r\n      onClose      = {onClose}\r\n      onSubmit     = {handleSubmit}>\r\n        <label className=\"popup__input-container\">\r\n          <input id=\"avatar-url-input\" type=\"url\" className=\"popup__text popup__text_type_avatar\"\r\n                 name=\"avatar\" placeholder=\"Ссылка на новый аватар\" required ref={avatarInput}/>\r\n          <span id=\"avatar-url-input-error\" className=\"popup__error\"></span>\r\n        </label>\r\n  </PopupWithForm>);\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction AddPlacePopup ({isOpen, onClose, onAddPlace, isLoading}) {\r\n\r\n  const [name, setName] = React.useState(\"\");\r\n  const [link, setLink] = React.useState(\"\");\r\n\r\n  function handleChangeName (e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handleChangeLink (e) {\r\n    setLink(e.target.value);\r\n  }\r\n\r\n  function handleAddPlace(e) {\r\n  e.preventDefault();\r\n  onAddPlace({name,link});\r\n  setName(\"\");\r\n  setLink(\"\");\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title        = \"Новое место\"\r\n      name         = \"new-item\"\r\n      submitButton = {`${isLoading ? \"Создание\" : \"Создать\"}`}\r\n      isOpen       = {isOpen}\r\n      onClose      = {onClose}\r\n      onSubmit     = {handleAddPlace}>\r\n      <label className=\"popup__input-container\">\r\n        <input id=\"picture-name-input\" type=\"text\" className=\"popup__text popup__text_type_picture-name\"\r\n               name=\"picture_name\" placeholder=\"Название\" minLength=\"1\"\r\n               maxLength=\"30\" onChange={handleChangeName} value={name||''} required/>\r\n        <span id=\"picture-name-input-error\" className=\"popup__error\"></span>\r\n      </label>\r\n      <label className=\"popup__input-container\">\r\n        <input id=\"url-input\" type=\"url\" className=\"popup__text popup__text_type_link\" name=\"link\"\r\n               placeholder=\"Ссылка на картинку\" onChange={handleChangeLink} value={link||''} required/>\r\n        <span id=\"url-input-error\" className=\"popup__error\"></span>\r\n      </label>\r\n  </PopupWithForm>);\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","import React from 'react';\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction ConfirmDeletePopup ({cardId, onSubmit, onClose, isOpen }) {\r\n\r\n  function handleSubmitForm (e) {\r\n    e.preventDefault();\r\n    onSubmit(cardId)\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title        = \"Вы уверены?\"\r\n      name         = \"submit\"\r\n      submitButton = \"Да\"\r\n      isOpen       = {isOpen}\r\n      onClose      = {onClose}\r\n      onSubmit     = {handleSubmitForm}/>\r\n  )\r\n}\r\n\r\nexport default ConfirmDeletePopup;\r\n","import React from \"react\";\r\n\r\n\r\nfunction InfoTooltip ({ onClose, picture, text, isOpen }) {\r\n\r\n  return (\r\n    <div className={`popup ${isOpen && 'popup_opened'}`}>\r\n      <div className=\"popup__form\">\r\n        <img className=\"popup__picture-title\"\r\n             src={picture} alt={text}></img>\r\n        <h2 className=\"popup__title popup__title_position_center\">{text}</h2>\r\n        <button type=\"button\" className=\"popup__close\" onClick={onClose}></button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default InfoTooltip;\r\n","export const AUTH_URL = 'https://auth.nomoreparties.co';\r\n\r\n\r\nconst getResponseData = (res) => {\r\n  if (!res.ok) {\r\n    return Promise.reject(`Произошла ошибка ${res.status}`);\r\n  }\r\n  return res.json();\r\n}\r\n\r\nexport const register = (email, password) => {\r\n  return fetch(`${AUTH_URL}/signup` , {\r\n    method: 'POST',\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    body: JSON.stringify({email, password})})\r\n    .then(response => getResponseData(response));\r\n  }\r\n\r\n  export const authorize = (email, password) => {\r\n  return fetch(`${AUTH_URL}/signin`, {\r\n    method: 'POST',\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    body: JSON.stringify({email, password})})\r\n      .then(response => getResponseData(response));\r\n  }\r\n\r\n  export const checkTokenValidity = (token) => {\r\n  return fetch(`${AUTH_URL}/users/me`,{\r\n    method: 'GET',\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Authorization\" : `Bearer ${token}`\r\n    }\r\n  })\r\n    .then(response => getResponseData(response));\r\n  }\r\n\r\n\r\n","export default __webpack_public_path__ + \"static/media/error-picture.d4ce2a26.svg\";","import React from \"react\";\r\nimport InfoTooltip from \"./InfoTooltip\";\r\nimport Header from \"./Header\";\r\nimport {useHistory, withRouter} from \"react-router-dom\";\r\nimport * as Auth from '../utils/auth';\r\nimport pictureError from '../images/error-picture.svg'\r\n\r\n\r\nfunction Login ({handleLogin}) {\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n  const [infoTooltipIsOpened, setInfoTooltip] = React.useState(false);\r\n\r\n  const history = useHistory();\r\n\r\n  const handleEmailChange = (e) => setEmail(e.target.value);\r\n  const handlePasswordChange = (e) => setPassword(e.target.value);\r\n\r\n  const closePopup = () => setInfoTooltip(false);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    Auth.authorize(email, password)\r\n      .then(data => {\r\n        if(data.token) {\r\n          localStorage.setItem('jwt', data.token);\r\n          handleLogin();\r\n          history.push(\"/\");\r\n        }\r\n      })\r\n      .catch(err=>{\r\n        setInfoTooltip(true);\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Header\r\n        text=\"Регистрация\"\r\n        textColor=\"#FFFFFF\"\r\n        link = \"sign-up\"/>\r\n      <main className=\"content\">\r\n    <form className=\"form\" onSubmit={handleSubmit}>\r\n      <h2 className=\"form__title\">Вход</h2>\r\n      <input className=\"form__input\" placeholder=\"Email\" type=\"email\" onChange={handleEmailChange}/>\r\n      <input className=\"form__input\" placeholder=\"Пароль\" type=\"password\" onChange={handlePasswordChange}/>\r\n      <button type=\"submit\" className=\"form__submit-button\">Войти</button>\r\n    </form>\r\n      </main>\r\n      <InfoTooltip\r\n        picture = {pictureError}\r\n        text=\"Что-то пошло не так! Попробуйте ещё раз.\"\r\n        isOpen = {infoTooltipIsOpened}\r\n        onClose = {closePopup}/>\r\n      </>\r\n  );\r\n}\r\n\r\nexport default withRouter(Login);\r\n","export default __webpack_public_path__ + \"static/media/done-picture.a9eb6caf.svg\";","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Header from \"./Header\";\r\nimport * as Auth from '../utils/auth';\r\nimport InfoTooltip from \"./InfoTooltip\";\r\nimport donePicture from \"../images/done-picture.svg\";\r\n\r\nfunction Register () {\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n  const [infoTooltipIsOpened, setInfoTooltip] = React.useState(false);\r\n\r\n\r\n  const handleEmailChange = (e) => setEmail(e.target.value);\r\n  const handlePasswordChange = (e) => setPassword(e.target.value);\r\n\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    Auth.register(email, password)\r\n      .then(data => {\r\n        if (data) {\r\n          setInfoTooltip(true);\r\n        }\r\n      })\r\n      .catch(err => console.log(err));\r\n  }\r\n\r\n  const closePopup = () => setInfoTooltip(false);\r\n\r\n\r\n  return (\r\n    <>\r\n      <Header\r\n        text=\"Войти\"\r\n        textColor=\"#FFFFFF\"\r\n        link=\"sign-in\"/>\r\n      <main className=\"content\">\r\n        <form className=\"form\" onSubmit={handleSubmit}>\r\n          <h2 className=\"form__title\">Регистрация</h2>\r\n          <input className=\"form__input\" placeholder=\"Email\" type=\"email\" onChange={handleEmailChange}/>\r\n          <input className=\"form__input\" placeholder=\"Пароль\" type=\"password\" onChange={handlePasswordChange}/>\r\n          <button type=\"submit\" className=\"form__submit-button\">Зарегестрироваться</button>\r\n          <p className=\"form__text\">Уже зарегистрированы? <Link to=\"/sign-in\" className=\"form__link\">Войти</Link></p>\r\n        </form>\r\n      </main>\r\n      <InfoTooltip\r\n        picture={donePicture}\r\n        text=\"Вы успешно зарегистрировались!\"\r\n        isOpen={infoTooltipIsOpened}\r\n        onClose={closePopup}/>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\r\n  return (\r\n    <Route>\r\n      {\r\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" />\r\n      }\r\n    </Route>\r\n  )}\r\n\r\nexport default ProtectedRoute;\r\n","import React from \"react\";\r\nimport {Route, Redirect, Switch, useHistory} from \"react-router-dom\";\r\nimport Main from \"./Main\";\r\nimport Footer from \"./Footer\";\r\nimport ImagePopup from \"./ImagePopup\";\r\nimport api from \"../utils/api\";\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\nimport EditProfilePopup from \"./EditProfilePopup\";\r\nimport EditAvatarPopup from \"./EditAvatarPopup\";\r\nimport AddPlacePopup from \"./AddPlacePopup\";\r\nimport ConfirmDeletePopup from \"./ConfirmDeletePopup\";\r\nimport Login from \"./Login\";\r\nimport Register from \"./Register\";\r\nimport ProtectedRoute from \"./ProtectedRoute\";\r\nimport * as Auth from '../utils/auth';\r\n\r\nfunction App() {\r\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false);\r\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\r\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\r\n  const [isDeleteSubmitPopupOpen, setDeleteSubmitPopupOpen] = React.useState(false);\r\n  const [selectedCard, setSelectedCard] = React.useState({isOpen: false, link:'', name:''});\r\n  const [currentUser, setCurrentUser] = React.useState({});\r\n  const [cards, setCards] = React.useState([]);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [cardIdToDelete, setCardIdToDelete] = React.useState(null);\r\n  const [loggedIn, setLoggedIn] = React.useState(false);\r\n  const [email, setEmail] = React.useState(\"\");\r\n  const history = useHistory();\r\n\r\n  //проверка токена\r\n  const tokenCheck = () => {\r\n    const jwt = localStorage.getItem('jwt');\r\n  Auth.checkTokenValidity(jwt)\r\n    .then(data=>{\r\n      if(data) {\r\n        setEmail(data.data.email);\r\n        setLoggedIn(true);\r\n        history.push(\"\");\r\n      }\r\n    })\r\n  }\r\n\r\n  // выход из пользователя\r\n  const handleSignOut = () => {\r\n    localStorage.removeItem('jwt');\r\n      setLoggedIn(false);\r\n      history.push('/sign-in')\r\n  }\r\n\r\n  //вход в пользователя\r\n  const handleSignIn = () => {\r\n    setLoggedIn(true);\r\n    tokenCheck();  }\r\n\r\n  //получение данных\r\n  React.useEffect(()=>{\r\n    Promise.all([api.getInfo(), api.getCards()])\r\n      .then(info=>{\r\n        const [userInfo, cards] = info;\r\n        setCurrentUser(userInfo);\r\n        setCards(cards);\r\n      })\r\n      .catch(err => console.log(err))},[]);\r\n\r\n  React.useEffect(()=>{\r\n    tokenCheck();\r\n  },[]);\r\n\r\n  //функции для установки состояния открытого попапа\r\n    function handleEditAvatarClick () {\r\n    setEditAvatarPopupOpen(true);\r\n  }\r\n    function handleEditProfileClick (){\r\n    setEditProfilePopupOpen(true);\r\n  }\r\n    function handleAddPlaceClick () {\r\n    setAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function handleCardClick({name, link}) {\r\n      setSelectedCard({isOpen:true, name:name, link: link})\r\n  }\r\n\r\n  //функция закрытия попапов\r\n  function closeAllPopups () {\r\n      setEditAvatarPopupOpen(false);\r\n      setAddPlacePopupOpen(false);\r\n      setEditProfilePopupOpen(false);\r\n      setDeleteSubmitPopupOpen(false);\r\n      setSelectedCard({isOpen:false, link: \"\",name: \"\"});\r\n      setCardIdToDelete(null);\r\n  }\r\n\r\n  //функция отвечающая за апдейт данных у пользователя\r\n   function handleUpdateUser({name, about}) {\r\n   setLoading(true);\r\n    api.setInfo({name, about})\r\n      .then((info) => {\r\n      setCurrentUser(info);\r\n      closeAllPopups();\r\n  })\r\n      .catch(err => console.log(err))\r\n      .finally(()=>setLoading(false))\r\n   }\r\n\r\n   //функция для обновления аватара на сервере\r\n   function handleUpdateAvatar (avatarLink) {\r\n     setLoading(true);\r\n     api.setAvatar(avatarLink)\r\n      .then((info) => {\r\n        setCurrentUser(info);\r\n        closeAllPopups();\r\n      })\r\n      .catch(err => console.log(err))\r\n       .finally(()=>setLoading(false))\r\n   }\r\n\r\n   //функция для лайка карточек\r\n  function handleCardLike (card) {\r\n    const isLiked = card.likes.some(like => like._id ===currentUser._id);\r\n    api.changeLikeCardStatus(card._id, !isLiked)\r\n      .then((newCard)=>{\r\n      const newCards = cards.map(cardItem=>cardItem._id === card._id ? newCard : cardItem);\r\n      setCards(newCards);\r\n    })\r\n      .catch(err => console.log(err))\r\n  }\r\n\r\n  //функция для открытия попапа подтверждения удаления, передача в ней ид карточки\r\n  function handleCardDelete (cardId) {\r\n      setCardIdToDelete(cardId);\r\n      setDeleteSubmitPopupOpen(true);\r\n  }\r\n\r\n  //функция для удаления карточки при submit\r\n  function handleCardDeleteSubmit (cardId) {\r\n    api.deleteCard(cardId).then(()=>{\r\n      const newCards = cards.filter(cardItem=> cardItem._id !== cardId);\r\n      setCards(newCards);\r\n      setCardIdToDelete(null);\r\n      closeAllPopups()}\r\n    )\r\n      .catch(err => console.log(err))\r\n  }\r\n\r\n  //функция для добавления карточек\r\n  function handleAddPlaceSubmit (data) {\r\n    setLoading(true);\r\n    api.addCard(data)\r\n      .then(card=>{\r\n        setCards([card, ...cards])\r\n        closeAllPopups();\r\n      })\r\n      .catch(err => console.log(err))\r\n      .finally(()=>setLoading(false))\r\n  }\r\n\r\n  return (\r\n\r\n      <div className=\"page\">\r\n        <Switch>\r\n          <Route path=\"/sign-in\">\r\n            <Login handleLogin = {handleSignIn}/>\r\n          </Route>\r\n\r\n          <Route path=\"/sign-up\">\r\n            <Register/>\r\n          </Route>\r\n\r\n        <CurrentUserContext.Provider value={currentUser}>\r\n        <ProtectedRoute exact path=\"/\"\r\n                        loggedIn={loggedIn}\r\n                        component={Main}\r\n                        onEditAvatar  = {handleEditAvatarClick}\r\n                        onEditProfile = {handleEditProfileClick}\r\n                        onAddPlace    = {handleAddPlaceClick}\r\n                        onCardClick   = {handleCardClick}\r\n                        cards         = {cards}\r\n                        onCardLike    = {handleCardLike}\r\n                        onCardDelete  = {handleCardDelete}\r\n                        email         = {email}\r\n                        onSignOut     = {handleSignOut}\r\n        >\r\n      </ProtectedRoute>\r\n          <EditProfilePopup\r\n            isOpen       = {isEditProfilePopupOpen}\r\n            onClose      = {closeAllPopups}\r\n            onUpdateUser = {handleUpdateUser}\r\n            isLoading    = {loading}/>\r\n\r\n          <EditAvatarPopup\r\n            isOpen         = {isEditAvatarPopupOpen}\r\n            onClose        = {closeAllPopups}\r\n            onUpdateAvatar = {handleUpdateAvatar}\r\n            isLoading      = {loading}/>\r\n\r\n          <AddPlacePopup\r\n            isOpen     = {isAddPlacePopupOpen}\r\n            onClose    = {closeAllPopups}\r\n            onAddPlace = {handleAddPlaceSubmit}\r\n            isLoading  = {loading}\r\n          />\r\n\r\n          <ConfirmDeletePopup\r\n            isOpen   = {isDeleteSubmitPopupOpen}\r\n            cardId   = {cardIdToDelete}\r\n            onSubmit = {handleCardDeleteSubmit}\r\n            onClose  = {closeAllPopups}/>\r\n\r\n          <ImagePopup\r\n            card    = {selectedCard}\r\n            onClose = {closeAllPopups}/>\r\n        </CurrentUserContext.Provider>\r\n\r\n          <Route>\r\n            {loggedIn ? <Redirect to=\"/\"/> : <Redirect to=\"/sign-in\"/>}\r\n          </Route>\r\n        </Switch>\r\n\r\n        <Footer />\r\n\r\n\r\n\r\n      </div>\r\n\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport {BrowserRouter} from \"react-router-dom\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n    <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}